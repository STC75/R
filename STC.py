import base64
exec(base64.b64decode("I2NvZGluZz11dGYNCmltcG9ydCBvcyxzeXMsdGltZSxqc29uLHJhbmRvbSxyZSxzdHJpbmcscGxhdGZvcm0sYmFzZTY0DQp0cnk6DQogICAgaW1wb3J0IHJlcXVlc3RzDQogICAgZnJvbSBjb25jdXJyZW50LmZ1dHVyZXMgaW1wb3J0IFRocmVhZFBvb2xFeGVjdXRvciBhcyBUaHJlYWRQb29sDQogICAgaW1wb3J0IG1lY2hhbml6ZQ0KICAgIGZyb20gcmVxdWVzdHMuZXhjZXB0aW9ucyBpbXBvcnQgQ29ubmVjdGlvbkVycm9yDQpleGNlcHQgTW9kdWxlTm90Rm91bmRFcnJvcjoNCiAgICBvcy5zeXN0ZW0oJ3BpcCBpbnN0YWxsIG1lY2hhbml6ZSByZXF1ZXN0cyBmdXR1cmVzPT0yID4gL2Rldi9udWxsJykNCiAgICBvcy5zeXN0ZW0oJ3B5dGhvbiBob3AucHknKQ0KbG9nbz0iIiINCg0KDQouLiMjIyMjIy4uIyMuLi4uLiMjLi4uLiMjIy4uLi4jIy4uLi4jIy4jIyMjDQouIyMuLi4uIyMuIyMuLi4uLiMjLi4uIyMuIyMuLi4jIyMuLi4jIy4uIyMuDQouIyMuLi4uLi4uIyMuLi4uLiMjLi4jIy4uLiMjLi4jIyMjLi4jIy4uIyMuDQouLiMjIyMjIy4uIyMjIyMjIyMjLiMjLi4uLi4jIy4jIy4jIy4jIy4uIyMuDQouLi4uLi4uIyMuIyMuLi4uLiMjLiMjIyMjIyMjIy4jIy4uIyMjIy4uIyMuDQouIyMuLi4uIyMuIyMuLi4uLiMjLiMjLi4uLi4jIy4jIy4uLiMjIy4uIyMuDQouLiMjIyMjIy4uIyMuLi4uLiMjLiMjLi4uLi4jIy4jIy4uLi4jIy4jIyMjDQogICAgDQogICAgIA0KLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCkF1dGhvciAgIDogIFNIQU5JDQpHaXRodWIgICA6ICBodHRwczovL2dpdGh1Yi5jb20vU0hBTklfU1RDDQpXaGF0c2FwcCA6ICArODQ1ODgzNDk5NzkNClZlcnNpb24gIDogIDYuMA0KLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0NCi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tIiIiDQpsb29wID0gMA0Kb2tzID0gW10NCmNwcyA9IFtdDQp0cnk6DQogICAgcHJpbnQoJ1xuXG5cMDMzWzE7MzNtTG9hZGluZyBhc3NldCBmaWxlcyAuLi4gXDAzM1swOzk3bScpDQogICAgI3Byb3h5ID0gcmVxdWVzdHMuZ2V0KCdodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vSGFtemFoYXNoL2Fzc2VzdHMvbWFpbi91cGRhdGVfdWEudHh0JykudGV4dC5zcGxpdGxpbmVzKCkNCiAgICBwcm94eSA9IFsnTW96aWxsYS81LjAgKExpbnV4OyBBbmRyb2lkIDExOyBUQS0xMDc0KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBDaHJvbWUvOTYuMC4zODYxLjkyIE1vYmlsZSBTYWZhcmkvNTM3LjM2JywgJ01vemlsbGEvNS4wIChMaW51eDsgQW5kcm9pZCA2OyBURUNOTyBLQzEzKSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBDaHJvbWUvODkuMC40MTM0LjkxIE1vYmlsZSBTYWZhcmkvNTM3LjM2JywgJ01vemlsbGEvNS4wIChMaW51eDsgQW5kcm9pZCAxMjsgVEVDTk8gS0MxMCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzgzLjAuNDU1NS4xMzYgTW9iaWxlIFNhZmFyaS81MzcuMzYnLCAnTW96aWxsYS81LjAgKExpbnV4OyBBbmRyb2lkIDg7IFRFQ05PIEtDMikgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzcyLjAuMzkwNi44NyBNb2JpbGUgU2FmYXJpLzUzNy4zNicsICdNb3ppbGxhLzUuMCAoTGludXg7IEFuZHJvaWQgMTE7IEluZmluaXggWDY3OSkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzk2LjAuNDY3MC4xNjAgTW9iaWxlIFNhZmFyaS81MzcuMzYnLCAnTW96aWxsYS81LjAgKExpbnV4OyBBbmRyb2lkIDExOyBJbmZpbml4IFg2NjEpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIENocm9tZS85Ni4wLjM4MDAuMTA2IE1vYmlsZSBTYWZhcmkvNTM3LjM2JywgJ01vemlsbGEvNS4wIChMaW51eDsgQW5kcm9pZCA4OyBTTS1HOTY1SCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzgzLjAuNDI0NS45NyBNb2JpbGUgU2FmYXJpLzUzNy4zNicsICdNb3ppbGxhLzUuMCAoTGludXg7IEFuZHJvaWQgODsgUmVkbWkgTm90ZSAxNSkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzg3LjAuNDY1OS45NSBNb2JpbGUgU2FmYXJpLzUzNy4zNicsICdNb3ppbGxhLzUuMCAoTGludXg7IEFuZHJvaWQgNjsgSXRlbCBMNzA1KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBDaHJvbWUvODEuMC40MTM2Ljc0IE1vYmlsZSBTYWZhcmkvNTM3LjM2JywgJ01vemlsbGEvNS4wIChMaW51eDsgQW5kcm9pZCA3OyBSZWRtaSBOb3RlIDYpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIENocm9tZS84MC4wLjQ0MTcuOTYgTW9iaWxlIFNhZmFyaS81MzcuMzYnLCAnTW96aWxsYS81LjAgKExpbnV4OyBBbmRyb2lkIDEwOyBJbmZpbml4IFg2MjkpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIENocm9tZS85My4wLjM4MDQuMTA0IE1vYmlsZSBTYWZhcmkvNTM3LjM2JywgJ01vemlsbGEvNS4wIChMaW51eDsgQW5kcm9pZCA2OyBWNDA1M1gpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIENocm9tZS83MC4wLjM5NTMuMTA3IE1vYmlsZSBTYWZhcmkvNTM3LjM2JywgJ01vemlsbGEvNS4wIChMaW51eDsgQW5kcm9pZCA5OyBUQS0xMDY0KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBDaHJvbWUvNzguMC40Njk0LjcxIE1vYmlsZSBTYWZhcmkvNTM3LjM2JywgJ01vemlsbGEvNS4wIChMaW51eDsgQW5kcm9pZCA2OyBJdGVsIEw5OTYpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIENocm9tZS85Ny4wLjM4NzYuNzggTW9iaWxlIFNhZmFyaS81MzcuMzYnLCAnTW96aWxsYS81LjAgKExpbnV4OyBBbmRyb2lkIDk7IFNNLUc5ODBIKSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBDaHJvbWUvOTMuMC40MzE0LjcxIE1vYmlsZSBTYWZhcmkvNTM3LjM2JywgJ01vemlsbGEvNS4wIChMaW51eDsgQW5kcm9pZCAxMjsgVjQ4NThYKSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBDaHJvbWUvODUuMC40NTI2LjE2MCBNb2JpbGUgU2FmYXJpLzUzNy4zNicsICdNb3ppbGxhLzUuMCAoTGludXg7IEFuZHJvaWQgMTE7IFRFQ05PIEtDOSkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzc0LjAuMzk0My4xMjEgTW9iaWxlIFNhZmFyaS81MzcuMzYnLCAnTW96aWxsYS81LjAgKExpbnV4OyBBbmRyb2lkIDg7IEl0ZWwgTDg3MykgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzcwLjAuNDg4OC4xMjcgTW9iaWxlIFNhZmFyaS81MzcuMzYnLCAnTW96aWxsYS81LjAgKExpbnV4OyBBbmRyb2lkIDc7IFRFQ05PIEtDMTMpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIENocm9tZS83My4wLjQwMTguNTAgTW9iaWxlIFNhZmFyaS81MzcuMzYnLCAnTW96aWxsYS81LjAgKExpbnV4OyBBbmRyb2lkIDExOyBURUNOTyBLQzE4KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBDaHJvbWUvOTEuMC40NzExLjEwMSBNb2JpbGUgU2FmYXJpLzUzNy4zNicsICdNb3ppbGxhLzUuMCAoTGludXg7IEFuZHJvaWQgMTE7IFJlZG1pIE5vdGUgMTQpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIENocm9tZS83MS4wLjQ4NTMuMTEyIE1vYmlsZSBTYWZhcmkvNTM3LjM2JywgJ01vemlsbGEvNS4wIChMaW51eDsgQW5kcm9pZCA2OyBUQS0xMDUyKSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBDaHJvbWUvNzQuMC4zNzA1LjYwIE1vYmlsZSBTYWZhcmkvNTM3LjM2JywgJ01vemlsbGEvNS4wIChMaW51eDsgQW5kcm9pZCA4OyBJbmZpbml4IFg2MzQpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIENocm9tZS84MS4wLjQyNTguNTggTW9iaWxlIFNhZmFyaS81MzcuMzYnLCAnTW96aWxsYS81LjAgKExpbnV4OyBBbmRyb2lkIDg7IFRBLTEwNzIpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIENocm9tZS8xMDEuMC40Nzk2Ljc3IE1vYmlsZSBTYWZhcmkvNTM3LjM2JywgJ01vemlsbGEvNS4wIChMaW51eDsgQW5kcm9pZCAxMjsgSW5maW5peCBYNjczKSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBDaHJvbWUvOTQuMC40NDcxLjg5IE1vYmlsZSBTYWZhcmkvNTM3LjM2JywgJ01vemlsbGEvNS4wIChMaW51eDsgQW5kcm9pZCA4OyBWNDA1NFgpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIENocm9tZS83OS4wLjQ4MzQuMTU4IE1vYmlsZSBTYWZhcmkvNTM3LjM2JywgJ01vemlsbGEvNS4wIChMaW51eDsgQW5kcm9pZCAxMTsgSXRlbCBMNzU1KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBDaHJvbWUvNzEuMC40MDk3LjEwNCBNb2JpbGUgU2FmYXJpLzUzNy4zNicsICdNb3ppbGxhLzUuMCAoTGludXg7IEFuZHJvaWQgMTI7IEl0ZWwgTDg2OCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzg0LjAuNDIzMC4xNDIgTW9iaWxlIFNhZmFyaS81MzcuMzYnLCAnTW96aWxsYS81LjAgKExpbnV4OyBBbmRyb2lkIDY7IFJlZG1pIE5vdGUgMTApIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIENocm9tZS85MC4wLjQzNzUuMTMxIE1vYmlsZSBTYWZhcmkvNTM3LjM2JywgJ01vemlsbGEvNS4wIChMaW51eDsgQW5kcm9pZCA5OyBTTS1HOTYxSCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzgzLjAuNDcyMi43MyBNb2JpbGUgU2FmYXJpLzUzNy4zNiddDQogICAgdiA9IDMuMQ0KICAgIHVwZGF0ZSA9IHJlcXVlc3RzLmdldCgnaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL0hhbXphaGFzaC9maWxlcy9tYWluL3ZlcnNpb24udHh0JykudGV4dA0KICAgIGlmIHN0cih2KSBpbiB1cGRhdGU6DQogICAgICAgIG9zLnN5c3RlbSgncm0gLXJmIGgqJykNCiAgICAgICAgb3Muc3lzdGVtKCdjdXJsIC1MIGh0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9IYW16YWhhc2gvaG9wL21haW4vaG9wLnB5ID4gaG9wLnB5JykNCiAgICAgICAgb3Muc3lzdGVtKCdweXRob24gaG9wLnB5JykNCiAgICBlbHNlOnBhc3MNCmV4Y2VwdDpwcmludCgnXG5cMDMzWzE7MzFtTm8gaW50ZXJuZXQgY29ubmVjdGlvbiAuLi4gXDAzM1swOzk3bScpDQojZ2xvYmFsIGZ1bmN0aW9ucw0KZGVmIGR5bmFtaWModGV4dCk6DQogICAgdGl0aWsgPSBbJy4gICAnLCcuLiAgJywnLi4uICcsJy4uLi4gJ10NCiAgICBmb3IgbyBpbiB0aXRpazoNCiAgICAgICAgcHJpbnQoJ1xyJyt0ZXh0K28pLA0KICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoKCk7dGltZS5zbGVlcCgxKQ0KZGVmIGJ1eSgpOg0KICAgIG9zLnN5c3RlbSgnY2xlYXInKQ0KICAgIHByaW50KGxvZ28pDQogICAgcHJpbnQoJ1wwMzNbMTszM21DaGVja2luZyBzdWJzY3JpcHRpb24gLi4uLlwwMzNbMDs5N20nKQ0KICAgIHRyeToNCiAgICAgICAgdXNlcl9kYXRhID0gcmVxdWVzdHMuZ2V0KCdodHRwczovL2dpdGh1Yi5jb20vU1RDNzUvU19UX0MvYmxvYi9tYWluL2EnKS50ZXh0LnNwbGl0bGluZXMoKQ0KICAgICAgICB0MSA9IGJhc2U2NC5iNjRlbmNvZGUoc3RyKG9zLmdldHVpZCgpKS5lbmNvZGUoJ2FzY2lpJykpDQogICAgICAgIHQyID0gYmFzZTY0LmI2NGVuY29kZSgoc3RyKHBsYXRmb3JtLnVuYW1lKClbMl0pKS5lbmNvZGUoJ2FzY2lpJykpDQogICAgICAgIGdlbl90b2tlbj0oJ1FXNEhERFFDUkctJytzdHIodDEpKyctQVpNQUgtJytzdHIodDIpKQ0KICAgICAgICBpZiBnZW5fdG9rZW4gaW4gdXNlcl9kYXRhOg0KICAgICAgICAgICAgbWFpbigpDQogICAgICAgIGVsc2U6DQogICAgICAgICAgICBwcmludCgnXG5Zb3VyIHRva2VuOiAnK2dlbl90b2tlbikNCiAgICAgICAgICAgIHByaW50KCdcblxuIFlvdSBkb25vdCBoYXZlIGhzdCBzdWJzY3JpcHRpb24uJykNCiAgICAgICAgICAgIHByaW50KCdOZWVjaHkgZGl5ZSBlYXN5cGFpc2EgYWNjb3VudCBwYXIgUlMgMzAwIHNlbmQga3J5LicpDQogICAgICAgICAgICBwcmludCgnUGF5bWVudCBrYXJueSBrIGJhZCBwYXltZW50IGthIHNjcmVlbnNob3Qgb3IgYXBuYSB0b2tlbiBuZWVjaHkgZGl5ZSB3aGF0c2FwcCBudW1iZXIgcHIgc2VuZCBrcnknKQ0KICAgICAgICAgICAgcHJpbnQoNTAqJy0nKQ0KICAgICAgICAgICAgcHJpbnQoJ1tQYXltZW50IE51bWJlcl0nKQ0KICAgICAgICAgICAgcHJpbnQoJ0FjY291bnQgdHlwZTogRWFzeXBhaXNhJykNCiAgICAgICAgICAgIHByaW50KDUwKictJykNCiAgICAgICAgICAgIHByaW50KDUwKictJykNCiAgICAgICAgICAgIGlucHV0KCdQcmVzcyBlbnRlciB0byBjb250YWN0IG9uIHdoYXRzYXBwJykNCiAgICAgICAgICAgIG9zLnN5c3RlbSgneGRnLW9wZW4gaHR0cHM6Ly93YS5tZS8rODQ1ODgzNDk5NzknKQ0KICAgIGV4Y2VwdCBFeGNlcHRpb24gYXMgZToNCiAgICAgICAgI3ByaW50KGUpDQogICAgICAgIHByaW50KCdcblwwMzNbMTszMW1ObyBpbnRlcm5ldCBjb25uZWN0aW9uIC4uLiBcMDMzWzA7OTdtJykNCmRlZiBtYWluKCk6DQogICAgb3Muc3lzdGVtKCdjbGVhcicpDQogICAgcHJpbnQobG9nbykNCiAgICBwcmludCgnWzFdIFJhbmRvbSBjcmFjaycpDQogICAgcHJpbnQoNTAqJy0nKQ0KICAgIG9wdCA9IGlucHV0KCdDaG9vc2Ugb3B0aW9uID4+PiAnKQ0KICAgIGlmIG9wdCA9PScxJzoNCiAgICAgICAgcmFuZG9tX2NyYWNrKCkNCiAgICBlbGlmIG9wdCA9PScyJzoNCiAgICAgICAgZmlsZV9jcmFjaygpDQogICAgZWxpZiBvcHQgPT0nMyc6DQogICAgICAgIGNyZWF0ZV9maWxlKCkNCiAgICBlbGlmIG9wdCA9PSc0JzoNCiAgICAgICAgc2lkcygpDQogICAgZWxpZiBvcHQgPT0nNSc6DQogICAgICAgIG9zLnN5c3RlbSgncm0gLXJmIC5mYl8qLnR4dCcpDQogICAgICAgIGxvZ2luKCkNCiAgICBlbGlmIG9wdCA9PSc2JzoNCiAgICAgICAgcmVtb3ZlX2R1YigpDQogICAgZWxpZiBvcHQgPT0nNyc6DQogICAgICAgIG9zLnN5c3RlbSgneGRnLW9wZW4gaHR0cHM6Ly9jaGF0LndoYXRzYXBwLmNvbS9CYnNlVktGd1BweENtTDhpTnoxazJVJykNCiAgICBlbHNlOg0KICAgICAgICBwcmludCgnXG5cMDMzWzE7MzFtQ2hvb3NlIHZhbGlkIG9wdGlvblwwMzNbMDs5N20nKQ0KZGVmIHJhbmRvbV9jcmFjaygpOg0KICAgIG9zLnN5c3RlbSgnY2xlYXInKQ0KICAgIHByaW50KGxvZ28pDQogICAgcHJpbnQoJ1sxXSBSYW5kb20gVUlEIGNyYWNrJykNCiAgICBwcmludCgnWzJdIFJhbmRvbSBudW1iZXIgY3JhY2snKQ0KICAgIHByaW50KCdbQl0gQmFjaycpDQogICAgcHJpbnQoNTAqJy0nKQ0KICAgIG9wdCA9IGlucHV0KCdDaG9vc2Ugb3B0aW9uID4+PiAnKQ0KICAgIGlmIG9wdCA9PScxJzoNCiAgICAgICAgcmFuZG9tX3VpZCgpDQogICAgZWxpZiBvcHQgPT0nMic6DQogICAgICAgIHJhbmRvbV9udW1iZXIoKQ0KICAgIGVsaWYgb3B0ID09JzMnOg0KICAgICAgICBtYWluKCkNCiAgICBlbHNlOg0KICAgICAgICBwcmludCgnXG5cMDMzWzE7MzFtQ2hvb3NlIHZhbGlkIG9wdGlvblwwMzNbMDs5N20nKQ0KZGVmIHJhbmRvbV91aWQoKToNCiAgICB1c2VyPVtdDQogICAgb3Muc3lzdGVtKCdjbGVhcicpDQogICAgcHJpbnQobG9nbykNCiAgICBsaW1pdCA9IGludChpbnB1dCgnSG93IG1hbnkgaWRzIGRvIHlvdSB3YW50IHRvIGFkZCA/ICcpKQ0KICAgIGZvciBubWJyIGluIHJhbmdlKGxpbWl0KToNCiAgICAgICAgbm1wID0gJycuam9pbihyYW5kb20uY2hvaWNlKHN0cmluZy5kaWdpdHMpIGZvciBfIGluIHJhbmdlKDExKSkNCiAgICAgICAgdXNlci5hcHBlbmQoJzEwMDAnK25tcCkNCiAgICBwcmludCgnXG5cMDMzWzE7MzNtRXhhbXBsZTogMTIzNDU2LDEyMzQ1NjcsMTIzNDU2NzggLi4uIFwwMzNbMDs5N20nKQ0KICAgIHB3eCA9IGlucHV0KCdQdXQgcGFzc3dvcmRzOiAnKS5zcGxpdCgnLCcpDQogICAgd2l0aCBUaHJlYWRQb29sKG1heF93b3JrZXJzPTMwKSBhcyB5YWFyaToNCiAgICAgICAgb3Muc3lzdGVtKCdjbGVhcicpDQogICAgICAgIHByaW50KGxvZ28pDQogICAgICAgIHRsID0gc3RyKGxlbih1c2VyKSkNCiAgICAgICAgcHJpbnQoJ1RvdGFsIGlkczogJyt0bCkNCiAgICAgICAgcHJpbnQoJ1RoZSBwcm9jZXNzIGhhcyBiZWVuIHN0YXJ0ZWQnKQ0KICAgICAgICBwcmludCg1MConLScpDQogICAgICAgIGZvciB1aWQgaW4gdXNlcjoNCiAgICAgICAgICAgIHlhYXJpLnN1Ym1pdChyY3JhY2ssdWlkLHB3eCx0bCkNCiAgICBwcmludCg1MConLScpDQogICAgcHJpbnQoJ0NyYWNrIHByb2Nlc3MgaGFzIGJlZW4gY29tcGxldGVkJykNCiAgICBwcmludCgnSWRzIHNhdmVkIGluIG9rLnR4dCxjcC50eHQnKQ0KICAgIHByaW50KDUwKictJykNCmRlZiByYW5kb21fbnVtYmVyKCk6DQogICAgdXNlcj1bXQ0KICAgIG9zLnN5c3RlbSgnY2xlYXInKQ0KICAgIHByaW50KGxvZ28pDQogICAgcHJpbnQoJ1wwMzNbMTszM21Db2RlIGV4YW1wbGU6IDAzMDEsMDMwMiwwMzA1LDAzMDYgLi4uXDAzM1swOzk3bScpDQogICAga29kZSA9IGlucHV0KCdQdXQgY29kZTogJykNCiAgICBsaW1pdCA9IGludChpbnB1dCgnSG93IG1hbnkgbnVtYmVycyBkbyB5b3Ugd2FudCB0byBhZGQgPyAnKSkNCiAgICBmb3Igbm1iciBpbiByYW5nZShsaW1pdCk6DQogICAgICAgIG5tcCA9ICcnLmpvaW4ocmFuZG9tLmNob2ljZShzdHJpbmcuZGlnaXRzKSBmb3IgXyBpbiByYW5nZSg3KSkNCiAgICAgICAgdXNlci5hcHBlbmQobm1wKQ0KICAgIHdpdGggVGhyZWFkUG9vbChtYXhfd29ya2Vycz0zMCkgYXMgeWFhcmk6DQogICAgICAgIG9zLnN5c3RlbSgnY2xlYXInKQ0KICAgICAgICBwcmludChsb2dvKQ0KICAgICAgICB0bCA9IHN0cihsZW4odXNlcikpDQogICAgICAgIHByaW50KCdUb3RhbCBpZHM6ICcrdGwpDQogICAgICAgIHByaW50KCdUaGUgcHJvY2VzcyBoYXMgYmVlbiBzdGFydGVkJykNCiAgICAgICAgcHJpbnQoNTAqJy0nKQ0KICAgICAgICBmb3IgZ3VydSBpbiB1c2VyOg0KICAgICAgICAgICAgdWlkID0ga29kZStndXJ1DQogICAgICAgICAgICBwd3ggPSBbZ3VydV0NCiAgICAgICAgICAgIHlhYXJpLnN1Ym1pdChyY3JhY2ssdWlkLHB3eCx0bCkNCiAgICBwcmludCg1MConLScpDQogICAgcHJpbnQoJ0NyYWNrIHByb2Nlc3MgaGFzIGJlZW4gY29tcGxldGVkJykNCiAgICBwcmludCgnSWRzIHNhdmVkIGluIG9rLnR4dCxjcC50eHQnKQ0KICAgIHByaW50KDUwKictJykNCmRlZiBjcmVhdGVfZmlsZSgpOg0KICAgIGlkcz1bXQ0KICAgIG9zLnN5c3RlbSgnY2xlYXInKQ0KICAgIHRyeToNCiAgICAgICAgZW1haWwgPSBvcGVuKCcuZmJfZW1haWwudHh0JywgJ3InKS5yZWFkKCkNCiAgICAgICAgcGFzID0gb3BlbignLmZiX3Bhcy50eHQnLCdyJykucmVhZCgpDQogICAgZXhjZXB0IEZpbGVOb3RGb3VuZEVycm9yOg0KICAgICAgICBsb2dpbigpDQogICAgcHJpbnQobG9nbykNCiAgICBkeW5hbWljKCdHZW5lcmF0aW5nIHNlc3Npb24gZm9yIHlvdSAnKQ0KICAgIGJyID0gbWVjaGFuaXplLkJyb3dzZXIoKQ0KICAgIGJyLnNldF9oYW5kbGVfcm9ib3RzKEZhbHNlKQ0KICAgIGJyLm9wZW4oJ2h0dHBzOi8vbS5mYWNlYm9vay5jb20vJykNCiAgICBici5fZmFjdG9yeS5pc19odG1sID0gVHJ1ZQ0KICAgIGJyLnNlbGVjdF9mb3JtKG5yPTApDQogICAgYnIuZm9ybVsnZW1haWwnXSA9IHN0cihlbWFpbCkNCiAgICBici5mb3JtWydwYXNzJ10gPSBzdHIocGFzKQ0KICAgIGJyLnN1Ym1pdCgpDQogICAgdXJsID0gYnIuZ2V0dXJsKCkNCiAgICAjcHJpbnQodXJsKQ0KICAgIGlmICdzYXZlLWRldmljZScgaW4gdXJsIG9yICd6ZXJvL3BvbGljeS9vcHRpbicgaW4gdXJsOg0KICAgICAgICBidXNpbmVzcz1ici5vcGVuKCdodHRwczovL2J1c2luZXNzLmZhY2Vib29rLmNvbS9idXNpbmVzc19sb2NhdGlvbnMnKQ0KICAgICAgICBidXNpbmVzc19yZWFkID0gYnVzaW5lc3MucmVhZCgpDQogICAgICAgIGFjY2Vzc190b2tlbiA9IHJlLnNlYXJjaCgiKEVBQUdcdyspIiwgc3RyKGJ1c2luZXNzX3JlYWQpKS5ncm91cCgxKQ0KICAgIGVsaWYgJ2NoZWNrcG9pbnQnIGluIHVybDoNCiAgICAgICAgcHJpbnQoJ1xuXDAzM1sxOzMxbUxvZ2dlZCBhY2NvdW50IGlzIGVucm9sbGVkIGluIGNoZWNrcG9pbnQsIHRyeSBsb2dnaW5nIGFub3RoZXIgYWNjb3VudFwwMzNbMDs5N20nKQ0KICAgICAgICBvcy5zeXN0ZW0oJ3JtIC1yZiBmYioudHh0JykNCiAgICAgICAgb3Muc3lzLmV4aXQoKQ0KICAgIGVsc2U6DQogICAgICAgIHByaW50KCdcblwwMzNbMTszMW1GQiBlbWFpbC9wYXNzd29yZCBpcyB3cm9uZywgdHJ5IGFub3RoZXIgYWNjb3VudCB3aXRoIGNvcnJlY3QgY3JlZGVudGlhbHNcMDMzWzA7OTdtJykNCiAgICAgICAgb3Muc3lzdGVtKCdybSAtcmYgZmIqLnR4dCcpDQogICAgICAgIG9zLnN5cy5leGl0KCkNCiAgICB0cnk6DQogICAgICAgIGJyLmFkZGhlYWRlcnM9WygnY29udGVudC10eXBlJywnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkJyksKCdhY2NlcHQtZW5jb2RpbmcnLCd1dGYtOCcpXQ0KICAgICAgICBxID0gYnIub3BlbignaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vbWU/ZmllbGRzPWlkLG5hbWUmYWNjZXNzX3Rva2VuPScrYWNjZXNzX3Rva2VuKQ0KICAgICAgICBkYXRhID0ganNvbi5sb2FkcyhxLnJlYWQoKSkNCiAgICAgICAgaWlkID0gZGF0YVsnaWQnXQ0KICAgIGV4Y2VwdCBLZXlFcnJvcjoNCiAgICAgICAgcHJpbnQoJ1xuXDAzM1sxOzMxbUludmFsaWQgcmVxdWVzdHMsIHRyeSBvbiBhbm90aGVyIGFjY291bnRcMDMzWzA7OTdtJykNCiAgICAgICAgb3Muc3lzdGVtKCdybSAtcmYgZmIqLnR4dCcpDQogICAgICAgIG9zLnN5cy5leGl0KCkNCiAgICBvcy5zeXN0ZW0oJ2NsZWFyJykNCiAgICBwcmludChsb2dvKQ0KICAgIGxpbWl0ID0gaW50KGlucHV0KCdIb3cgbWFueSBpZHMgZG8geW91IHdhbnQgdG8gYWRkPyAnKSkNCiAgICBwcmludCgnXDAzM1sxOzMzbUV4YW1wbGU6IC9zZGNhcmQvZmlsZW5hbWUudHh0XDAzM1swOzk3bScpDQogICAgc2YgPSBpbnB1dCgnU2F2ZSBmaWxlIGFzOiAnKQ0KICAgIHByaW50KDUwKictJykNCiAgICB0ID0gMA0KICAgIGZvciBfIGluIHJhbmdlKGxpbWl0KToNCiAgICAgICAgdCArPTENCiAgICAgICAgaWR0ID0gaW5wdXQoJ1B1dCBpZCBubyAlczogJyV0KQ0KICAgICAgICBxID0gYnIub3BlbignaHR0cHM6Ly9ncmFwaC5mYWNlYm9vay5jb20vJytpZHQrJz9maWVsZHM9ZnJpZW5kcy5maWVsZHMoaWQsbmFtZSkmYWNjZXNzX3Rva2VuPScrYWNjZXNzX3Rva2VuKQ0KICAgICAgICBkYXRhID0ganNvbi5sb2FkcyhxLnJlYWQoKSkNCiAgICAgICAgZm9yIGkgaW4gZGF0YVsnZnJpZW5kcyddWydkYXRhJ106DQogICAgICAgICAgICBpaWRzID0gaVsnaWQnXQ0KICAgICAgICAgICAgbmFtZXMgPSBpWyduYW1lJ10NCiAgICAgICAgICAgIGZuID0gbmFtZXMuc3BsaXQoJyAnKVswXQ0KICAgICAgICAgICAgdHJ5Og0KICAgICAgICAgICAgICAgIGxuID0gbmFtZXMuc3BsaXQoJyAnKVswXQ0KICAgICAgICAgICAgZXhjZXB0Og0KICAgICAgICAgICAgICAgIGxuID0gJ0FsaScNCiAgICAgICAgICAgIG9wZW4oc2YsJ2EnKS53cml0ZShpaWRzKyd8JytmbisnfCcrbG4rJ1xuJykNCiAgICBwcmludCg1MConLScpDQogICAgcHJpbnQoJ0ZpbGUgc2F2ZWQgYXM6ICcrc2YpDQogICAgaW5wdXQoJ1ByZXNzIGVudGVyIHRvIGJhY2sgJykNCiAgICBtYWluKCkNCmRlZiBmaWxlX2NyYWNrKCk6DQogICAgb3Muc3lzdGVtKCdjbGVhcicpDQogICAgcHJpbnQobG9nbykNCiAgICBmaWxlID0gaW5wdXQoJ1B1dCBmaWxlIHBhdGg6ICcpDQogICAgdHJ5Og0KICAgICAgICBmaWxlb3BlbiA9IG9wZW4oZmlsZSwncicpLnJlYWQoKS5zcGxpdGxpbmVzKCkNCiAgICBleGNlcHQgRmlsZU5vdEZvdW5kRXJyb3I6DQogICAgICAgIHByaW50KCdcMDMzWzE7OTFtRmlsZSBub3QgZm91bmQgb24gcHJvdmlkZWQgcGF0aCwgdHJ5IGFnYWluIC4uLi5cMDMzWzA7OTdtJykNCiAgICAgICAgdGltZS5zbGVlcCgxKQ0KICAgICAgICBmaWxlX2NyYWNrKCkNCiAgICBwcmludCg1MConLScpDQogICAgcHJpbnQoNTAqJy0nKQ0KICAgIGdhZGRhcmkgPSBpbnB1dCgnQ2hvb3NlIHBhc3NsaXN0OiAnKQ0KICAgIGlmIGdhZGRhcmkgPT0nMSc6DQogICAgICAgIHdpdGggVGhyZWFkUG9vbChtYXhfd29ya2Vycz0zMCkgYXMgeWFhcmk6DQogICAgICAgICAgICBvcy5zeXN0ZW0oJ2NsZWFyJykNCiAgICAgICAgICAgIHByaW50KGxvZ28pDQogICAgICAgICAgICB0bD1zdHIobGVuKGZpbGVvcGVuKSkNCiAgICAgICAgICAgIHByaW50KCdUb3RhbCBpZHM6ICcrdGwpDQogICAgICAgICAgICBwcmludCgnQnJ1dGUgSGFzIGJlZW4gc3RhcnRlZCcpDQogICAgICAgICAgICBwcmludCg1MConLScpDQogICAgICAgICAgICBmb3IgdXNlciBpbiBmaWxlb3BlbjoNCiAgICAgICAgICAgICAgICB0cnk6DQogICAgICAgICAgICAgICAgICAgIHVpZCxmaXJzdCxsYXN0ID0gdXNlci5zcGxpdCgnfCcpDQogICAgICAgICAgICAgICAgICAgICNwdWJsaWNfaWRzLmFwcGVuZCh1aWQpDQogICAgICAgICAgICAgICAgZXhjZXB0IFZhbHVlRXJyb3I6DQogICAgICAgICAgICAgICAgICAgIHByaW50KCdcblRoaXMgZmlsZSBpcyBub3Qgc3VwcG9ydGVkIGZvciBIT1AgdG9vbC5DcmVhdGUgZmlsZSBvbmx5IGZyb20gSE9QIHRvb2wuLi4uXG4nKQ0KICAgICAgICAgICAgICAgICAgICBvcy5zeXMuZXhpdCgpDQogICAgICAgICAgICAgICAgcHM9Zmlyc3QubG93ZXIoKQ0KICAgICAgICAgICAgICAgIHBzMj1sYXN0Lmxvd2VyKCkNCiAgICAgICAgICAgICAgICBwd3g9W3BzKycxMicscHMrJzEyMzQnLHBzKycxMTIyJyxwcysnNzg2JyxmaXJzdCsnMTIzJyxmaXJzdCsnMTIzNDUnXQ0KICAgICAgICAgICAgICAgIHlhYXJpLnN1Ym1pdChtZXRob2QxLHVpZCxwd3gsdGwpDQogICAgICAgIHByaW50KDUwKictJykNCiAgICAgICAgcHJpbnQoJ0NyYWNrIHByb2Nlc3MgaGFzIGJlZW4gY29tcGxldGVkJykNCiAgICAgICAgcHJpbnQoJ0lkcyBzYXZlZCBpbiBvay50eHQsY3AudHh0JykNCiAgICAgICAgcHJpbnQoNTAqJy0nKQ0KICAgIGVsaWYgZ2FkZGFyaSA9PScyJzoNCiAgICAgICAgd2l0aCBUaHJlYWRQb29sKG1heF93b3JrZXJzPTMwKSBhcyB5YWFyaToNCiAgICAgICAgICAgIG9zLnN5c3RlbSgnY2xlYXInKQ0KICAgICAgICAgICAgcHJpbnQobG9nbykNCiAgICAgICAgICAgIHRsPXN0cihsZW4oZmlsZW9wZW4pKQ0KICAgICAgICAgICAgcHJpbnQoJ1RvdGFsIGlkczogJyt0bCkNCiAgICAgICAgICAgIHByaW50KCdCcnV0ZSBIYXMgYmVlbiBzdGFydGVkJykNCiAgICAgICAgICAgIHByaW50KDUwKictJykNCiAgICAgICAgICAgIGZvciB1c2VyIGluIGZpbGVvcGVuOg0KICAgICAgICAgICAgICAgIHRyeToNCiAgICAgICAgICAgICAgICAgICAgdWlkLGZpcnN0LGxhc3QgPSB1c2VyLnNwbGl0KCd8JykNCiAgICAgICAgICAgICAgICAgICAgI3B1YmxpY19pZHMuYXBwZW5kKHVpZCkNCiAgICAgICAgICAgICAgICBleGNlcHQgVmFsdWVFcnJvcjoNCiAgICAgICAgICAgICAgICAgICAgcHJpbnQoJ1xuVGhpcyBmaWxlIGlzIG5vdCBzdXBwb3J0ZWQgZm9yIEhPUCB0b29sLkNyZWF0ZSBmaWxlIG9ubHkgZnJvbSBIT1AgdG9vbC4uLi5cbicpDQogICAgICAgICAgICAgICAgICAgIG9zLnN5cy5leGl0KCkNCiAgICAgICAgICAgICAgICBwcz1maXJzdC5sb3dlcigpDQogICAgICAgICAgICAgICAgcHMyPWxhc3QubG93ZXIoKQ0KICAgICAgICAgICAgICAgIHB3eD1bcHMrJyAnK3BzMixwcytwczJdDQogICAgICAgICAgICAgICAgeWFhcmkuc3VibWl0KG1ldGhvZDEsdWlkLHB3eCx0bCkNCiAgICAgICAgcHJpbnQoNTAqJy0nKQ0KICAgICAgICBwcmludCgnQ3JhY2sgcHJvY2VzcyBoYXMgYmVlbiBjb21wbGV0ZWQnKQ0KICAgICAgICBwcmludCgnSWRzIHNhdmVkIGluIG9rLnR4dCxjcC50eHQnKQ0KICAgICAgICBwcmludCg1MConLScpDQogICAgZWxpZiBnYWRkYXJpID09JzMnOg0KICAgICAgICB3aXRoIFRocmVhZFBvb2wobWF4X3dvcmtlcnM9MzApIGFzIHlhYXJpOg0KICAgICAgICAgICAgb3Muc3lzdGVtKCdjbGVhcicpDQogICAgICAgICAgICBwcmludChsb2dvKQ0KICAgICAgICAgICAgdGw9c3RyKGxlbihmaWxlb3BlbikpDQogICAgICAgICAgICBwcmludCgnVG90YWwgaWRzOiAnK3RsKQ0KICAgICAgICAgICAgcHJpbnQoJ0JydXRlIEhhcyBiZWVuIHN0YXJ0ZWQnKQ0KICAgICAgICAgICAgcHJpbnQoNTAqJy0nKQ0KICAgICAgICAgICAgZm9yIHVzZXIgaW4gZmlsZW9wZW46DQogICAgICAgICAgICAgICAgdHJ5Og0KICAgICAgICAgICAgICAgICAgICB1aWQsZmlyc3QsbGFzdCA9IHVzZXIuc3BsaXQoJ3wnKQ0KICAgICAgICAgICAgICAgICAgICAjcHVibGljX2lkcy5hcHBlbmQodWlkKQ0KICAgICAgICAgICAgICAgIGV4Y2VwdCBWYWx1ZUVycm9yOg0KICAgICAgICAgICAgICAgICAgICBwcmludCgnXG5UaGlzIGZpbGUgaXMgbm90IHN1cHBvcnRlZCBmb3IgSE9QIHRvb2wuQ3JlYXRlIGZpbGUgb25seSBmcm9tIEhPUCB0b29sLi4uLlxuJykNCiAgICAgICAgICAgICAgICAgICAgb3Muc3lzLmV4aXQoKQ0KICAgICAgICAgICAgICAgIHBzPWZpcnN0Lmxvd2VyKCkNCiAgICAgICAgICAgICAgICBwczI9bGFzdC5sb3dlcigpDQogICAgICAgICAgICAgICAgcHd4PVtwcytwczIrJzEyMycscHMrcHMyKycxMjM0JyxwcytwczIrJzEyMzQ1JyxwcytwczIrJzc4NicscHMrcHMyKycxMTIyJyxwcytwczIrJzEyJ10NCiAgICAgICAgICAgICAgICB5YWFyaS5zdWJtaXQobWV0aG9kMSx1aWQscHd4LHRsKQ0KICAgICAgICBwcmludCg1MConLScpDQogICAgICAgIHByaW50KCdDcmFjayBwcm9jZXNzIGhhcyBiZWVuIGNvbXBsZXRlZCcpDQogICAgICAgIHByaW50KCdJZHMgc2F2ZWQgaW4gb2sudHh0LGNwLnR4dCcpDQogICAgICAgIHByaW50KDUwKictJykNCiAgICBlbGlmIGdhZGRhcmkgPT0nNCc6DQogICAgICAgIHByaW50KDUwKictJykNCiAgICAgICAgcHJpbnQoNTAqJy0nKQ0KICAgICAgICBwd3ggPSBpbnB1dCgnUHV0IHBhc3N3b3JkczogJykuc3BsaXQoJywnKQ0KICAgICAgICB3aXRoIFRocmVhZFBvb2wobWF4X3dvcmtlcnM9MzApIGFzIHlhYXJpOg0KICAgICAgICAgICAgb3Muc3lzdGVtKCdjbGVhcicpDQogICAgICAgICAgICBwcmludChsb2dvKQ0KICAgICAgICAgICAgdGw9c3RyKGxlbihmaWxlb3BlbikpDQogICAgICAgICAgICBwcmludCgnVG90YWwgaWRzOiAnK3RsKQ0KICAgICAgICAgICAgcHJpbnQoJ0JydXRlIEhhcyBiZWVuIHN0YXJ0ZWQnKQ0KICAgICAgICAgICAgcHJpbnQoNTAqJy0nKQ0KICAgICAgICAgICAgZm9yIHVzZXIgaW4gZmlsZW9wZW46DQogICAgICAgICAgICAgICAgdHJ5Og0KICAgICAgICAgICAgICAgICAgICB1aWQsZmlyc3QsbGFzdCA9IHVzZXIuc3BsaXQoJ3wnKQ0KICAgICAgICAgICAgICAgICAgICAjcHVibGljX2lkcy5hcHBlbmQodWlkKQ0KICAgICAgICAgICAgICAgIGV4Y2VwdCBWYWx1ZUVycm9yOg0KICAgICAgICAgICAgICAgICAgICBwcmludCgnXG4gVGhpcyBmaWxlIGlzIG5vdCBzdXBwb3J0ZWQgZm9yIEhPUCB0b29sLkNyZWF0ZSBmaWxlIG9ubHkgZnJvbSBIT1AgdG9vbC4uLi5cbicpDQogICAgICAgICAgICAgICAgICAgIG9zLnN5cy5leGl0KCkNCiAgICAgICAgICAgICAgICB5YWFyaS5zdWJtaXQobWV0aG9kMSx1aWQscHd4LHRsKQ0KICAgICAgICBwcmludCg1MConLScpDQogICAgICAgIHByaW50KCdDcmFjayBwcm9jZXNzIGhhcyBiZWVuIGNvbXBsZXRlZCcpDQogICAgICAgIHByaW50KCdJZHMgc2F2ZWQgaW4gb2sudHh0LGNwLnR4dCcpDQogICAgICAgIHByaW50KDUwKictJykNCiAgICBlbHNlOg0KICAgICAgICBwcmludCgnQ2hvb3NlIHZhbGlkIHBhc3NsaXN0LCB0cnkgYWdhaW4gLi4uJykNCiAgICAgICAgdGltZS5zbGVlcCgxKQ0KICAgICAgICBtYWluKCkNCmRlZiBsb2dpbigpOg0KICAgIG9zLnN5c3RlbSgnY2xlYXInKQ0KICAgIHByaW50KGxvZ28pDQogICAgcHJpbnQoJ1wwMzNbMTszM21QdXQgeW91ciBlbWFpbCAmIHBhc3MgdG8gbG9naW5cMDMzWzA7OTdtXG4nKQ0KICAgIGVtYWlsID0gaW5wdXQoJ0VtYWlsL2lkL251bWJlcjogJykNCiAgICBwYXNzdyA9IGlucHV0KCdQYXNzd29yZDogJykNCiAgICBvcGVuKCcuZmJfZW1haWwudHh0JywgJ3cnKS53cml0ZShlbWFpbCkNCiAgICBvcGVuKCcuZmJfcGFzLnR4dCcsICd3Jykud3JpdGUocGFzc3cpDQogICAgcHJpbnQoJ1wwMzNbMTszMm1Mb2dnZWQgaW4gc3VjY2Vzc2Z1bGx5XDAzM1swOzk3bVxuJykNCiAgICBvcy5zeXMuZXhpdCgpDQpkZWYgc2lkcygpOg0KICAgIG9zLnN5c3RlbSgnY2xlYXInKQ0KICAgIHByaW50KGxvZ28pDQogICAgZmlsZV9uYW1lID0gaW5wdXQoJ0lucHV0IGZpbGUgbmFtZTogJykNCiAgICBsaW1pdCA9IGludChpbnB1dCgnSG93IG1hbnkgbGlua3MgZG8geW91IHdhbnQgdG8gc2VwYXJhdGU/ICcpKQ0KICAgIHByaW50KCdcblwwMzNbMTszM21FeGFtcGxlOiAvc2RjYXJkL2ZpbGVuYW1lLnR4dFwwMzNbMDs5N20nKQ0KICAgIG5ld19zYXZlID0gaW5wdXQoJ1NhdmUgbmV3IGZpbGUgYXM6ICcpDQogICAgeSA9IDANCiAgICBmb3IgayBpbiByYW5nZShsaW1pdCk6DQogICAgICAgIHkrPTENCiAgICAgICAgbGlua3MgPSBpbnB1dCgnUHV0IGxpbmtzICVzOiAnJSh5KSkNCiAgICAgICAgb3Muc3lzdGVtKCdjYXQgJytmaWxlX25hbWUrJyB8IGdyZXAgIicrbGlua3MrJyIgPj4gL3NkY2FyZC8nK25ld19zYXZlKQ0KICAgIHByaW50KDUwKictJykNCiAgICBwcmludCgnTGlua3MgZ3JhYmJlZCBzdWNjZXNzZnVsbHknKQ0KICAgIHByaW50KCdUb3RhbCBncmFiYmVkIGxpbmtzOiAnK3N0cihsZW4ob3BlbignL3NkY2FyZC8nK25ld19zYXZlKS5yZWFkKCkuc3BsaXRsaW5lcygpKSkpDQogICAgcHJpbnQoJ05ldyBmaWxlIHNhdmVkIGFzOiAvc2RjYXJkLycrbmV3X3NhdmUpDQogICAgcHJpbnQoNTAqJy0nKQ0KICAgIGlucHV0KCdQcmVzcyBlbnRlciB0byBiYWNrICcpDQpkZWYgcmVtb3ZlX2R1YigpOg0KICAgIG9zLnN5c3RlbSgnY2xlYXInKQ0KICAgIHByaW50KGxvZ28pDQogICAgcHJpbnQoJ0R1YmxpY2F0ZSBsaW5lcyByZW1vdmVyIC4uLicpDQogICAgcHJpbnQoNTAqJy0nKQ0KICAgIHVzZXJfZmlsZSA9IGlucHV0KCdQdXQgZmlsZSBwYXRoOiAnKQ0KICAgIHRyeToNCiAgICAgICAgb3Blbih1c2VyX2ZpbGUsJ3InKS5yZWFkKCkNCiAgICAgICAgcHJpbnQoJ1xuXDAzM1sxOzMzbUV4YW1wbGU6IC9zZGNhcmQvZmlsZW5hbWUudHh0XDAzM1swOzk3bScpDQogICAgICAgIHNhdmVfZmlsZSA9IGlucHV0KCdTYXZlIG5ldyBmaWxlIGFzOiAnKQ0KICAgICAgICBvcy5zeXN0ZW0oJ3RvdWNoICcrc2F2ZV9maWxlKQ0KICAgICAgICBvcy5zeXN0ZW0oJ3NvcnQgLXIgJyt1c2VyX2ZpbGUrJyB8IHVuaXEgPiAnK3NhdmVfZmlsZSkNCiAgICAgICAgcHJpbnQoNTAqJy0nKQ0KICAgICAgICBwcmludCgnRHVibGljYXRlIGxpbmVzIGhhcyBiZWVuIHJlbW92ZWQgZnJvbSBmaWxlJykNCiAgICAgICAgcHJpbnQoJ1Jlc3VsdCBmaWxlIHNhdmVkIGFzOiAnKQ0KICAgICAgICBwcmludCg1MConLScpDQogICAgZXhjZXB0IEZpbGVOb3RGb3VuZEVycm9yOg0KICAgICAgICBwcmludCgnXG5cMDMzWzE7MzFtICBGaWxlIG5vdCBmb3VuZCBvbiBwcm92aWRlZCBwYXRoLCB0cnkgYWdhaW4gLi4uXDAzM1swOzk3bScpDQonJycNCkhlcmUgYWxsIGNyYWNrIG1ldGhvZHMgYXJlIGRlZmluZWQNCg0KDQoNCg0KDQoNCg0KDQonJycNCmRlZiByY3JhY2sodWlkLHB3eCx0bCk6DQogICAgI3ByaW50KHVzZXIpDQogICAgZ2xvYmFsIGxvb3ANCiAgICBnbG9iYWwgY3BzDQogICAgZ2xvYmFsIG9rcw0KICAgIGdsb2JhbCBwcm94eQ0KICAgIHRyeToNCiAgICAgICAgZm9yIHBzIGluIHB3eDoNCiAgICAgICAgICAgIHBybyA9IHJhbmRvbS5jaG9pY2UocHJveHkpDQogICAgICAgICAgICBzZXNzaW9uID0gcmVxdWVzdHMuU2Vzc2lvbigpDQogICAgICAgICAgICBmcmVlX2ZiID0gc2Vzc2lvbi5nZXQoJ2h0dHBzOi8vbS5mYWNlYm9vay5jb20nKS50ZXh0DQogICAgICAgICAgICBsb2dfZGF0YSA9IHsNCiAgICAgICAgICAgICAgICAibHNkIjpyZS5zZWFyY2goJ25hbWU9ImxzZCIgdmFsdWU9IiguKj8pIicsIHN0cihmcmVlX2ZiKSkuZ3JvdXAoMSksDQogICAgICAgICAgICAiamF6b2VzdCI6cmUuc2VhcmNoKCduYW1lPSJqYXpvZXN0IiB2YWx1ZT0iKC4qPykiJywgc3RyKGZyZWVfZmIpKS5ncm91cCgxKSwNCiAgICAgICAgICAgICJtX3RzIjpyZS5zZWFyY2goJ25hbWU9Im1fdHMiIHZhbHVlPSIoLio/KSInLCBzdHIoZnJlZV9mYikpLmdyb3VwKDEpLA0KICAgICAgICAgICAgImxpIjpyZS5zZWFyY2goJ25hbWU9ImxpIiB2YWx1ZT0iKC4qPykiJywgc3RyKGZyZWVfZmIpKS5ncm91cCgxKSwNCiAgICAgICAgICAgICJ0cnlfbnVtYmVyIjoiMCIsDQogICAgICAgICAgICAidW5yZWNvZ25pemVkX3RyaWVzIjoiMCIsDQogICAgICAgICAgICAiZW1haWwiOnVpZCwNCiAgICAgICAgICAgICJwYXNzIjpwcywNCiAgICAgICAgICAgICJsb2dpbiI6IkxvZyBJbiJ9DQogICAgICAgICAgICBoZWFkZXJfZnJlZWZiID0geydhdXRob3JpdHknOidtLmZhY2Vib29rLmNvbScsDQogICAgICAgICAgICAnbWV0aG9kJzogJ1BPU1QnLA0KICAgICAgICAgICAgJ3NjaGVtZSc6ICdodHRwcycsDQogICAgICAgICAgICAnYWNjZXB0JzogJ3RleHQvaHRtbCxhcHBsaWNhdGlvbi94aHRtbCt4bWwsYXBwbGljYXRpb24veG1sO3E9MC45LGltYWdlL2F2aWYsaW1hZ2Uvd2VicCxpbWFnZS9hcG5nLCovKjtxPTAuOCxhcHBsaWNhdGlvbi9zaWduZWQtZXhjaGFuZ2U7dj1iMztxPTAuOScsDQogICAgICAgICAgICAnYWNjZXB0LWVuY29kaW5nJzondXRmLTgnLCdhY2NlcHQtbGFuZ3VhZ2UnOiAnZW4tVVMsZW47cT0wLjknLA0KICAgICAgICAgICAgJ2NhY2hlLWNvbnRyb2wnOiAnbWF4LWFnZT0wJywNCiAgICAgICAgICAgICdzZWMtY2gtdWEnOiAnIiBOb3QgQTtCcmFuZCI7dj0iOTkiLCAiQ2hyb21pdW0iO3Y9IjEwMSInLA0KICAgICAgICAgICAgJ3NlYy1jaC11YS1tb2JpbGUnOiAnPzEnLCdzZWMtY2gtdWEtcGxhdGZvcm0nOiAnIkFuZHJvaWQiJywNCiAgICAgICAgICAgICdzZWMtZmV0Y2gtZGVzdCc6ICdkb2N1bWVudCcsDQogICAgICAgICAgICAnc2VjLWZldGNoLW1vZGUnOiAnbmF2aWdhdGUnLA0KICAgICAgICAgICAgJ3NlYy1mZXRjaC1zaXRlJzogJ25vbmUnLA0KICAgICAgICAgICAgJ3NlYy1mZXRjaC11c2VyJzogJz8xJywNCiAgICAgICAgICAgICd1cGdyYWRlLWluc2VjdXJlLXJlcXVlc3RzJzogJzEnLA0KICAgICAgICAgICAgJ3VzZXItYWdlbnQnOiBwcm99DQogICAgICAgICAgICBsbyA9IHNlc3Npb24ucG9zdCgnaHR0cHM6Ly9tLmZhY2Vib29rLmNvbS9sb2dpbi9kZXZpY2UtYmFzZWQvcmVndWxhci9sb2dpbi8/cmVmc3JjPWRlcHJlY2F0ZWQmYW1wO2x3dj0xMDAmYW1wO3JlZmlkPTgnLGRhdGE9bG9nX2RhdGEsaGVhZGVycz1oZWFkZXJfZnJlZWZiKS50ZXh0DQogICAgICAgICAgICBsb2dfY29va2llcz1zZXNzaW9uLmNvb2tpZXMuZ2V0X2RpY3QoKS5rZXlzKCkNCiAgICAgICAgICAgICNwcmludChpaWQrJ3wnK3B3cysnfCcrc3RyKGxvZ19jb29raWVzKSkNCiAgICAgICAgICAgIGlmICdjX3VzZXInIGluIGxvZ19jb29raWVzOg0KICAgICAgICAgICAgICAgIGNva2k9IjsiLmpvaW4oW2tleSsiPSIrdmFsdWUgZm9yIGtleSx2YWx1ZSBpbiBzZXNzaW9uLmNvb2tpZXMuZ2V0X2RpY3QoKS5pdGVtcygpXSkNCiAgICAgICAgICAgICAgICBjaWQgPSBjb2tpWzc6MjJdDQogICAgICAgICAgICAgICAgcHJpbnQoJ1wwMzNbMDszNm1bU0hBTkktT0tdICcrY2lkKycgfCAnK3BzKydcMDMzWzA7OTBtJykNCiAgICAgICAgICAgICAgICBvcGVuKCdvay50eHQnLCAnYScpLndyaXRlKGNpZCsnIHwgJytwcysnXG4nKQ0KICAgICAgICAgICAgICAgIG9rcy5hcHBlbmQoY2lkKQ0KICAgICAgICAgICAgICAgIGJyZWFrDQogICAgICAgICAgICBlbGlmICdjaGVja3BvaW50JyBpbiBsb2dfY29va2llczoNCiAgICAgICAgICAgICAgICBjb2tpPSI7Ii5qb2luKFtrZXkrIj0iK3ZhbHVlIGZvciBrZXksdmFsdWUgaW4gc2Vzc2lvbi5jb29raWVzLmdldF9kaWN0KCkuaXRlbXMoKV0pDQogICAgICAgICAgICAgICAgY2lkID0gY29raVsyNDozOV0NCiAgICAgICAgICAgICAgICBwcmludCgnXDAzM1swOzMzbVtTSEFOSS1DUF0gJytjaWQrJyB8ICcrcHMrJ1wwMzNbMDs5MG0nKQ0KICAgICAgICAgICAgICAgIG9wZW4oJ2NwLnR4dCcsICdhJykud3JpdGUoY2lkKycgfCAnK3BzKydcbicpDQogICAgICAgICAgICAgICAgY3BzLmFwcGVuZChjaWQpDQogICAgICAgICAgICAgICAgYnJlYWsNCiAgICAgICAgICAgIGVsc2U6DQogICAgICAgICAgICAgICAgY29udGludWUNCiAgICAgICAgbG9vcCs9MQ0KICAgICAgICBzeXMuc3Rkb3V0LndyaXRlKCdTSEFOSVxyICAgWyVzLyVzXSAgT0s6LSAlcyAgQ1A6LSAlcyBcciclKGxvb3AsdGwsbGVuKG9rcyksbGVuKGNwcykpKSwNCiAgICAgICAgc3lzLnN0ZG91dC5mbHVzaCgpDQogICAgZXhjZXB0Og0KICAgICAgICBwYXNzDQpkZWYgbWV0aG9kMSh1aWQscHd4LHRsKToNCiAgICBnbG9iYWwgbG9vcA0KICAgIGdsb2JhbCBjcHMNCiAgICBnbG9iYWwgb2tzDQogICAgZ2xvYmFsIHByb3h5DQogICAgdHJ5Og0KICAgICAgICBmb3IgcHMgaW4gcHd4Og0KICAgICAgICAgICAgcHJvID0gcmFuZG9tLmNob2ljZShwcm94eSkNCiAgICAgICAgICAgIHNlc3Npb24gPSByZXF1ZXN0cy5TZXNzaW9uKCkNCiAgICAgICAgICAgIGZyZWVfZmIgPSBzZXNzaW9uLmdldCgnaHR0cHM6Ly9tLmZhY2Vib29rLmNvbScpLnRleHQNCiAgICAgICAgICAgIGxvZ19kYXRhID0gew0KICAgICAgICAgICAgICAgICJsc2QiOnJlLnNlYXJjaCgnbmFtZT0ibHNkIiB2YWx1ZT0iKC4qPykiJywgc3RyKGZyZWVfZmIpKS5ncm91cCgxKSwNCiAgICAgICAgICAgICJqYXpvZXN0IjpyZS5zZWFyY2goJ25hbWU9Imphem9lc3QiIHZhbHVlPSIoLio/KSInLCBzdHIoZnJlZV9mYikpLmdyb3VwKDEpLA0KICAgICAgICAgICAgIm1fdHMiOnJlLnNlYXJjaCgnbmFtZT0ibV90cyIgdmFsdWU9IiguKj8pIicsIHN0cihmcmVlX2ZiKSkuZ3JvdXAoMSksDQogICAgICAgICAgICAibGkiOnJlLnNlYXJjaCgnbmFtZT0ibGkiIHZhbHVlPSIoLio/KSInLCBzdHIoZnJlZV9mYikpLmdyb3VwKDEpLA0KICAgICAgICAgICAgInRyeV9udW1iZXIiOiIwIiwNCiAgICAgICAgICAgICJ1bnJlY29nbml6ZWRfdHJpZXMiOiIwIiwNCiAgICAgICAgICAgICJlbWFpbCI6dWlkLA0KICAgICAgICAgICAgInBhc3MiOnBzLA0KICAgICAgICAgICAgImxvZ2luIjoiTG9nIEluIn0NCiAgICAgICAgICAgIGhlYWRlcl9mcmVlZmIgPSB7J2F1dGhvcml0eSc6J20uZmFjZWJvb2suY29tJywNCiAgICAgICAgICAgICdtZXRob2QnOiAnUE9TVCcsDQogICAgICAgICAgICAnc2NoZW1lJzogJ2h0dHBzJywNCiAgICAgICAgICAgICdhY2NlcHQnOiAndGV4dC9odG1sLGFwcGxpY2F0aW9uL3hodG1sK3htbCxhcHBsaWNhdGlvbi94bWw7cT0wLjksaW1hZ2UvYXZpZixpbWFnZS93ZWJwLGltYWdlL2FwbmcsKi8qO3E9MC44LGFwcGxpY2F0aW9uL3NpZ25lZC1leGNoYW5nZTt2PWIzO3E9MC45JywNCiAgICAgICAgICAgICdhY2NlcHQtZW5jb2RpbmcnOid1dGYtOCcsJ2FjY2VwdC1sYW5ndWFnZSc6ICdlbi1VUyxlbjtxPTAuOScsDQogICAgICAgICAgICAnY2FjaGUtY29udHJvbCc6ICdtYXgtYWdlPTAnLA0KICAgICAgICAgICAgJ3NlYy1jaC11YSc6ICciIE5vdCBBO0JyYW5kIjt2PSI5OSIsICJDaHJvbWl1bSI7dj0iMTAxIicsDQogICAgICAgICAgICAnc2VjLWNoLXVhLW1vYmlsZSc6ICc/MScsJ3NlYy1jaC11YS1wbGF0Zm9ybSc6ICciQW5kcm9pZCInLA0KICAgICAgICAgICAgJ3NlYy1mZXRjaC1kZXN0JzogJ2RvY3VtZW50JywNCiAgICAgICAgICAgICdzZWMtZmV0Y2gtbW9kZSc6ICduYXZpZ2F0ZScsDQogICAgICAgICAgICAnc2VjLWZldGNoLXNpdGUnOiAnbm9uZScsDQogICAgICAgICAgICAnc2VjLWZldGNoLXVzZXInOiAnPzEnLA0KICAgICAgICAgICAgJ3VwZ3JhZGUtaW5zZWN1cmUtcmVxdWVzdHMnOiAnMScsDQogICAgICAgICAgICAndXNlci1hZ2VudCc6IHByb30NCiAgICAgICAgICAgIGxvID0gc2Vzc2lvbi5wb3N0KCdodHRwczovL20uZmFjZWJvb2suY29tL2xvZ2luL2RldmljZS1iYXNlZC9yZWd1bGFyL2xvZ2luLz9yZWZzcmM9ZGVwcmVjYXRlZCZhbXA7bHd2PTEwMCZhbXA7cmVmaWQ9OCcsZGF0YT1sb2dfZGF0YSxoZWFkZXJzPWhlYWRlcl9mcmVlZmIpLnRleHQNCiAgICAgICAgICAgIGxvZ19jb29raWVzPXNlc3Npb24uY29va2llcy5nZXRfZGljdCgpLmtleXMoKQ0KICAgICAgICAgICAgI3ByaW50KGlpZCsnfCcrcHdzKyd8JytzdHIobG9nX2Nvb2tpZXMpKQ0KICAgICAgICAgICAgaWYgJ2NfdXNlcicgaW4gbG9nX2Nvb2tpZXM6DQogICAgICAgICAgICAgICAgY29raT0iOyIuam9pbihba2V5KyI9Iit2YWx1ZSBmb3Iga2V5LHZhbHVlIGluIHNlc3Npb24uY29va2llcy5nZXRfZGljdCgpLml0ZW1zKCldKQ0KICAgICAgICAgICAgICAgIGNpZCA9IGNva2lbNzoyMl0NCiAgICAgICAgICAgICAgICBwcmludCgnXDAzM1swOzM2bVtTSEFOSS1PS10gJytjaWQrJyB8ICcrcHMrJ1wwMzNbMDs5MG0nKQ0KICAgICAgICAgICAgICAgIG9wZW4oJ29rLnR4dCcsICdhJykud3JpdGUoY2lkKycgfCAnK3BzKydcbicpDQogICAgICAgICAgICAgICAgb2tzLmFwcGVuZChjaWQpDQogICAgICAgICAgICAgICAgYnJlYWsNCiAgICAgICAgICAgIGVsaWYgJ2NoZWNrcG9pbnQnIGluIGxvZ19jb29raWVzOg0KICAgICAgICAgICAgICAgIGNva2k9IjsiLmpvaW4oW2tleSsiPSIrdmFsdWUgZm9yIGtleSx2YWx1ZSBpbiBzZXNzaW9uLmNvb2tpZXMuZ2V0X2RpY3QoKS5pdGVtcygpXSkNCiAgICAgICAgICAgICAgICBjaWQgPSBjb2tpWzI0OjM5XQ0KICAgICAgICAgICAgICAgIHByaW50KCdcMDMzWzA7MzNtW1NIQU5JLUNQXSAnK2NpZCsnIHwgJytwcysnXDAzM1swOzkwbScpDQogICAgICAgICAgICAgICAgb3BlbignY3AudHh0JywgJ2EnKS53cml0ZShjaWQrJyB8ICcrcHMrJ1xuJykNCiAgICAgICAgICAgICAgICBjcHMuYXBwZW5kKGNpZCkNCiAgICAgICAgICAgICAgICBicmVhaw0KICAgICAgICAgICAgZWxzZToNCiAgICAgICAgICAgICAgICBjb250aW51ZQ0KICAgICAgICBsb29wKz0xDQogICAgICAgIHN5cy5zdGRvdXQud3JpdGUoJ1NIQU5JXHIgICBbJXMvJXNdICBPSzotICVzICBDUDotICVzIFxyJyUobG9vcCx0bCxsZW4ob2tzKSxsZW4oY3BzKSkpLA0KICAgICAgICBzeXMuc3Rkb3V0LmZsdXNoKCkNCiAgICBleGNlcHQ6DQogICAgICAgIHBhc3MNCm1haW4oKQ0K"))